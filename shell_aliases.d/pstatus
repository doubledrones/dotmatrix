function pstatus() {
  IGNORE_PROJECTS="$DOTMATRIX_CONF/pstatus.ignore_projects"
  IGNORE_GEMS_IN_PROJECTS="$DOTMATRIX_CONF/pstatus.ignore_gems_in_projects"

  if [ ! -d $DOTMATRIX_CONF ]; then
    mkdir -p $DOTMATRIX_CONF
  fi
  if [ ! -f $IGNORE_PROJECTS ]; then
    touch $IGNORE_PROJECTS
  fi
  if [ ! -f $IGNORE_GEMS_IN_PROJECTS ]; then
    touch $IGNORE_GEMS_IN_PROJECTS
  fi

  cd ~/projects

  for PROJECT in *
  do
    if [ -z "`cat $IGNORE_PROJECTS | grep "^$PROJECT$"`" ]; then
      if [ -d $PROJECT/.git ]; then
        cd $PROJECT
        STATUS=`git st`
        case $STATUS in
          "## master")
            ;;
          *)
            echo
            echo $PROJECT
            git st
            ;;
        esac
        cd ..
      fi
      if [ -f $PROJECT/Gemfile ]; then
        for REQUIRED_GEM in wirble hirb awesome_print
        do
          if [ -z "`cat $IGNORE_GEMS_IN_PROJECTS | grep "^$REQUIRED_GEM: $PROJECT$"`" ]; then
            if [ -z "`cat $PROJECT/Gemfile | grep $REQUIRED_GEM`" ]; then
              echo "$PROJECT: \"$REQUIRED_GEM\" gem not included in Gemfile"
            fi
          fi
        done
      fi
    fi
  done
  echo
}
